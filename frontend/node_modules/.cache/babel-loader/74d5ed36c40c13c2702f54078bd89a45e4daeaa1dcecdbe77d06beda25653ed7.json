{"ast":null,"code":"import _objectSpread from\"/Users/vishesh/Downloads/HRApp 4/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{format}from'date-fns';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AttendanceHistory=()=>{const[attendance,setAttendance]=useState([]);const[loading,setLoading]=useState(true);const[filters,setFilters]=useState({startDate:'',endDate:''});useEffect(()=>{fetchAttendance();},[filters]);const fetchAttendance=async()=>{try{const params=new URLSearchParams();if(filters.startDate)params.append('startDate',filters.startDate);if(filters.endDate)params.append('endDate',filters.endDate);const res=await axios.get(\"/api/attendance/my?\".concat(params));setAttendance(res.data.attendance);setLoading(false);}catch(error){console.error('Error fetching attendance:',error);setLoading(false);}};const handleFilterChange=e=>{setFilters(_objectSpread(_objectSpread({},filters),{},{[e.target.name]:e.target.value}));};const getStatusBadge=status=>{const badgeClasses={present:'badge-success',absent:'badge-danger',late:'badge-warning','half-day':'badge-info'};return\"badge \".concat(badgeClasses[status]||'badge-secondary');};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading attendance history...\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Attendance History\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Filters\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem',flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{flex:1,minWidth:'200px'},children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Start Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"startDate\",className:\"form-input\",value:filters.startDate,onChange:handleFilterChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{flex:1,minWidth:'200px'},children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"End Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"endDate\",className:\"form-input\",value:filters.endDate,onChange:handleFilterChange})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Records (\",attendance.length,\")\"]}),attendance.length>0?/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Check In\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Check Out\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Work Hours\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Notes\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:attendance.map(record=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:format(new Date(record.date),'MMM dd, yyyy')}),/*#__PURE__*/_jsx(\"td\",{children:record.type}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:getStatusBadge(record.status),children:record.status})}),/*#__PURE__*/_jsx(\"td\",{children:record.checkIn?format(new Date(record.checkIn),'HH:mm'):'-'}),/*#__PURE__*/_jsx(\"td\",{children:record.checkOut?format(new Date(record.checkOut),'HH:mm'):'-'}),/*#__PURE__*/_jsx(\"td\",{children:record.checkIn&&record.checkOut?\"\".concat(((new Date(record.checkOut)-new Date(record.checkIn))/(1000*60*60)).toFixed(1),\"h\"):'-'}),/*#__PURE__*/_jsx(\"td\",{children:record.notes||'-'})]},record._id))})]}):/*#__PURE__*/_jsx(\"p\",{children:\"No attendance records found for the selected period.\"})]})]});};export default AttendanceHistory;","map":{"version":3,"names":["React","useState","useEffect","axios","format","jsx","_jsx","jsxs","_jsxs","AttendanceHistory","attendance","setAttendance","loading","setLoading","filters","setFilters","startDate","endDate","fetchAttendance","params","URLSearchParams","append","res","get","concat","data","error","console","handleFilterChange","e","_objectSpread","target","name","value","getStatusBadge","status","badgeClasses","present","absent","late","className","children","style","marginBottom","display","gap","flexWrap","flex","minWidth","type","onChange","length","map","record","Date","date","checkIn","checkOut","toFixed","notes","_id"],"sources":["/Users/vishesh/Downloads/HRApp 4/frontend/src/components/employee/AttendanceHistory.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { format } from 'date-fns';\r\n\r\nconst AttendanceHistory = () => {\r\n  const [attendance, setAttendance] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filters, setFilters] = useState({\r\n    startDate: '',\r\n    endDate: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchAttendance();\r\n  }, [filters]);\r\n\r\n  const fetchAttendance = async () => {\r\n    try {\r\n      const params = new URLSearchParams();\r\n      if (filters.startDate) params.append('startDate', filters.startDate);\r\n      if (filters.endDate) params.append('endDate', filters.endDate);\r\n      \r\n      const res = await axios.get(`/api/attendance/my?${params}`);\r\n      setAttendance(res.data.attendance);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('Error fetching attendance:', error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFilterChange = (e) => {\r\n    setFilters({\r\n      ...filters,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  const getStatusBadge = (status) => {\r\n    const badgeClasses = {\r\n      present: 'badge-success',\r\n      absent: 'badge-danger',\r\n      late: 'badge-warning',\r\n      'half-day': 'badge-info'\r\n    };\r\n    return `badge ${badgeClasses[status] || 'badge-secondary'}`;\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading attendance history...</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Attendance History</h2>\r\n      \r\n      {/* Filters */}\r\n      <div className=\"card\" style={{ marginBottom: '1rem' }}>\r\n        <h3>Filters</h3>\r\n        <div style={{ display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\r\n          <div className=\"form-group\" style={{ flex: 1, minWidth: '200px' }}>\r\n            <label className=\"form-label\">Start Date</label>\r\n            <input\r\n              type=\"date\"\r\n              name=\"startDate\"\r\n              className=\"form-input\"\r\n              value={filters.startDate}\r\n              onChange={handleFilterChange}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\" style={{ flex: 1, minWidth: '200px' }}>\r\n            <label className=\"form-label\">End Date</label>\r\n            <input\r\n              type=\"date\"\r\n              name=\"endDate\"\r\n              className=\"form-input\"\r\n              value={filters.endDate}\r\n              onChange={handleFilterChange}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Attendance Table */}\r\n      <div className=\"card\">\r\n        <h3>Records ({attendance.length})</h3>\r\n        {attendance.length > 0 ? (\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Date</th>\r\n                <th>Type</th>\r\n                <th>Status</th>\r\n                <th>Check In</th>\r\n                <th>Check Out</th>\r\n                <th>Work Hours</th>\r\n                <th>Notes</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {attendance.map((record) => (\r\n                <tr key={record._id}>\r\n                  <td>{format(new Date(record.date), 'MMM dd, yyyy')}</td>\r\n                  <td>{record.type}</td>\r\n                  <td>\r\n                    <span className={getStatusBadge(record.status)}>\r\n                      {record.status}\r\n                    </span>\r\n                  </td>\r\n                  <td>\r\n                    {record.checkIn ? format(new Date(record.checkIn), 'HH:mm') : '-'}\r\n                  </td>\r\n                  <td>\r\n                    {record.checkOut ? format(new Date(record.checkOut), 'HH:mm') : '-'}\r\n                  </td>\r\n                  <td>\r\n                    {record.checkIn && record.checkOut \r\n                      ? `${((new Date(record.checkOut) - new Date(record.checkIn)) / (1000 * 60 * 60)).toFixed(1)}h`\r\n                      : '-'\r\n                    }\r\n                  </td>\r\n                  <td>{record.notes || '-'}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        ) : (\r\n          <p>No attendance records found for the selected period.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AttendanceHistory; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}